<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.0.preview.7">
<title>语法</title>
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
<link rel="stylesheet" href="assets/css/view-example.css">
<script src='assets/js/jquery-2.1.1.min.js'></script>
<script src='assets/js/view-example.js'></script></head>
<body id="_syntax" class="book toc2 toc-left">
<div id="header">
<h1>语法</h1>
<span id="revnumber">version 2.4.0-SNAPSHOT</span>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_comments">1. 注释</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_single_line_comment">1.1. 单行注释</a></li>
<li><a href="#_multiline_comment">1.2. 多行注释</a></li>
<li><a href="#_groovydoc_comment">1.3. GroovyDoc 注释</a></li>
<li><a href="#_shebang_line">1.4. Shebang line</a></li>
</ul>
</li>
<li><a href="#_keywords">2. 关键字</a></li>
<li><a href="#_identifiers">3. 标识符</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_normal_identifiers">3.1. 普通标识符</a></li>
<li><a href="#_quoted_identifiers">3.2. 引用标识符</a></li>
</ul>
</li>
<li><a href="#all-strings">4. 字符串</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_single_quoted_string">4.1. 单引号字符串</a></li>
<li><a href="#_string_concatenation">4.2. 字符串拼接</a></li>
<li><a href="#_triple_single_quoted_string">4.3. 三单引号字符串</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_escaping_special_characters">4.3.1. 转义特殊字符</a></li>
<li><a href="#_unicode_escape_sequence">4.3.2. Unicode 转义序列</a></li>
</ul>
</li>
<li><a href="#_double_quoted_string">4.4. 双引号字符串</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_string_interpolation">4.4.1. 字符串插值</a></li>
<li><a href="#_special_case_of_interpolating_closure_expressions">4.4.2. 特例 插入闭包表达式</a></li>
<li><a href="#_interoperability_with_java">4.4.3. 与 Java 交互</a></li>
<li><a href="#_gstring_and_string_hashcodes">4.4.4. GString 和 String 的哈希码</a></li>
</ul>
</li>
<li><a href="#_triple_double_quoted_string">4.5. 三双引号字符串</a></li>
<li><a href="#_slashy_string">4.6. 斜线字符串</a></li>
<li><a href="#_dollar_slashy_string">4.7. 美元斜线字符串</a></li>
<li><a href="#_string_summary_table">4.8. 字符串总结表</a></li>
<li><a href="#_characters">4.9. 字符</a></li>
</ul>
</li>
<li><a href="#_numbers">5. 数值</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_integral_literals">5.1. 整数</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_alternative_non_base_10_representations">5.1.1. 可选的非十进制表示</a></li>
<li>
<ul class="sectlevel4">
<li><a href="#_binary_literal">二进制</a></li>
<li><a href="#_octal_literal">八进制</a></li>
<li><a href="#_hexadecimal_literal">十六进制</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_decimal_literals">5.2. 浮点数</a></li>
<li><a href="#_underscore_in_literals">5.3. Underscore in literals</a></li>
<li><a href="#_number_type_suffixes">5.4. Number type suffixes</a></li>
<li><a href="#_math_operations">5.5. Math operations</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#integer_division">5.5.1. The case of the division operator</a></li>
<li><a href="#power_operator">5.5.2. The case of the power operator</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_booleans">6. Booleans</a></li>
<li><a href="#_lists">7. Lists</a></li>
<li><a href="#_arrays">8. Arrays</a></li>
<li><a href="#_maps">9. Maps</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>这个章节主要涵盖 Groovy 编程语言的语法(syntax). Groovy 的语法(grammar)派生自(derives from)
Java 的语法, 但是针对 Groovy 的具体结构做了增强, 并允许一定的简化.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments">1. 注释</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_single_line_comment">1.1. 单行注释</h3>
<div class="paragraph">
<p>单行注释由 <code>//</code> 开始, 允许出现在一行的任意位置. <code>//</code> 之后换行符之前的字符都被认为是注释的一部分.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">// 一个标准的单行注释
println "hello" // 直到行尾的注释</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multiline_comment">1.2. 多行注释</h3>
<div class="paragraph">
<p>多行注释以 <code>/*</code> 开始, 可以出现在一行的任意位置. <code>/*</code> 之后的字符会被认为是注释的一部分,
包括换行符, 直到第一个 <code>*/</code> 元素. 因此多行注释可以放在语句之后, 甚至语句之间.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">/* 一个典型的多行注释
   占 2 行 */
println "hello" /* 一个在语句之后的
                   多行注释 */
println 1 /* one */ + 2 /* two */</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovydoc_comment">1.3. GroovyDoc 注释</h3>
<div class="paragraph">
<p>与多行注释类似, GroovyDoc 也是多行的, 但以 <code>/**</code> 开始, 以 <code>*/</code> 结束.
首行注释之后的行可以以可选的 <code>*</code> 号开始. 这些注释关联于:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>类型定义(类, 接口, 枚举, 注解)</p>
</li>
<li>
<p>字段和属性定义</p>
</li>
<li>
<p>方法定义</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>对以上元素, 即使没有 GroovyDoc 编译器也不会抱怨, 但应优先考虑使用该注释.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">/**
 * 一个类定义
 */
class Person {
    /** 姓名 */
    String name

    /**
     * 为特定的人创建一个问候方法.
     *
     * @param otherPerson 待问候的人
     * @return 问候信息
     */
    String greet(String otherPerson) {
       "Hello ${otherPerson}"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>GroovyDoc 遵循 JavaDoc 的约定(conventions), 因此你可以使用 JavaDoc 中的标签(tags).</p>
</div>
</div>
<div class="sect2">
<h3 id="_shebang_line">1.4. Shebang line</h3>
<div class="paragraph">
<p>单行注释之外还有一个特殊的行注释, 在 Unix 系统下通常称为 <em>shebang line</em>, 它允许脚本直接
从命令行启动, 前提是已安装了 Groovy 并且 <code>groovy</code> 命令包含在 <code>PATH</code> 环境变量中.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">#!/usr/bin/env groovy
println "Hello from the shebang line"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<code>#</code> 字符必须是文件的第一个字符, 任何缩进都会导致一个编译错误.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keywords">2. 关键字</h2>
<div class="sectionbody">
<div class="paragraph">
<p>下表列出了 Groovy 中的所有关键字:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<caption class="title">Table 1. 关键字</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">as</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">break</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">catch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">continue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">def</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">do</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">else</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">extends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">finally</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">for</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">goto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">import</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">instanceof</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">interface</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">new</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">return</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">super</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">switch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">this</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">throw</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">throws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">try</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">while</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_identifiers">3. 标识符</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_normal_identifiers">3.1. 普通标识符</h3>
<div class="paragraph">
<p>标识符(identifiers)以字母, 美元符号($)或者下划线开始. 不能以数字开始.</p>
</div>
<div class="paragraph">
<p>字母的取值范围如下:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>a</em> 到 <em>z</em> (小写的 ascii 字母)</p>
</li>
<li>
<p><em>A</em> 到 <em>Z</em> (大写的 ascii 字母)</p>
</li>
<li>
<p><em>\u00C0</em> 到 <em>\u00D6</em></p>
</li>
<li>
<p><em>\u00D8</em> 到 <em>\u00F6</em></p>
</li>
<li>
<p><em>\u00F8</em> 到 <em>\u00FF</em></p>
</li>
<li>
<p><em>\u0100</em> 到 <em>\uFFFE</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>之后的字符可以包含字母或者数字.</p>
</div>
<div class="paragraph">
<p>以下是一些有效标识符示例(变量名):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def name
def item3
def with_underscore
def $dollarStart</code></pre>
</div>
</div>
<div class="paragraph">
<p>但是以下的标识符是无效的:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def 3tier
def a+b
def a#b</code></pre>
</div>
</div>
<div class="paragraph">
<p>点号之后的所有关键字也是无效的标识符:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">foo.as
foo.assert
foo.break
foo.case
foo.catch</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quoted_identifiers">3.2. 引用标识符</h3>
<div class="paragraph">
<p>引用标识符(quoted identifiers)位于点表达式(dotted expression)的点号之后.
例如, 表达式 <code>person.name</code> 的 <code>name</code> 部分可以像 <code>person."name"</code> 或者 <code>person.'name'</code> 那样添加引号.
这相当有趣, 当某些标识符包含 Java 语言规范(Java Language Specification)所禁止的非法字符时,
在 Groovy 中通过添加引号是被允许的. 如 破择号(dash), 空格, 感叹号等.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def map = [:]

map."an identifier with a space and double quotes" = "ALLOWED"
map.'with-dash-signs-and-single-quotes' = "ALLOWED"

assert map."an identifier with a space and double quotes" == "ALLOWED"
assert map.'with-dash-signs-and-single-quotes' == "ALLOWED"</code></pre>
</div>
</div>
<div class="paragraph">
<p>我们将会在<a href="#all-strings">之后的字符串章节</a>中看到, Groovy 提供了不同的 字符串字面量(literals).
点号之后所有类型的字符串都是允许的.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">map.'single quote'
map."double quote"
map.'''triple single quote'''
map."""triple double quote"""
map./slashy string/
map.$/dollar slashy string/$</code></pre>
</div>
</div>
<div class="paragraph">
<p>普通字符串和 Groovy 的 GStrings(interpolated strings, 插值字符串)是有区别的,
对于后者, 在判断(evaluating)整个标识符时插值会被插入到最终的字符串中:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def firstname = "Homer"
map."Simson-${firstname}" = "Homer Simson"

assert map.'Simson-Homer' == "Homer Simson"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="all-strings">4. 字符串</h2>
<div class="sectionbody">
<div class="paragraph">
<p>文本也即字符串, 以字符链的形式表示.
Groovy 允许你实例化 <code>java.lang.String</code> 和 GStrings (<code>groovy.lang.GString</code>)对象, GStrings
在其他语言中称为 <em>插值字符串</em>.</p>
</div>
<div class="sect2">
<h3 id="_single_quoted_string">4.1. 单引号字符串</h3>
<div class="paragraph">
<p>单引号字符串即由单引号包围的一系列字符:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def firstname = "Homer"
map."Simson-${firstname}" = "Homer Simson"

assert map.'Simson-Homer' == "Homer Simson"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
单引号字符串是 <code>java.lang.String</code>, 不支持插值.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_string_concatenation">4.2. 字符串拼接</h3>
<div class="paragraph">
<p>Groovy 中的所有字符串都可以用 <code>+</code> 操作符来拼接(concatenation):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">assert 'ab' == 'a' + 'b'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_triple_single_quoted_string">4.3. 三单引号字符串</h3>
<div class="paragraph">
<p>三单引号字符串即由单引号包围的一系列字符:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">'a single quoted string'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
三单引号字符串是 <code>java.lang.String</code>, 不支持插值.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>三单引号字符串是多行的.
你可以用换行符分隔字符串内容, 而不用把字符串分割为多部分, 不用拼接字符串或者转义换行符.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def aMultilineString = '''line one
line two
line three'''</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果代码包含缩进, 如在类或者方法的主体(body)部分, 则字符串也会包含这些缩进的空白字符(whitespace).
可以通过 Groovy 开发工具(Development Kit) 中的 <code>String#stripIndent()</code> 方法来移除这些缩进,
通过 <code>String#stripMargin()</code> 方法, 传入一个分界字符(delimiter character)参数, 来指定要从字符串中移除的字符.</p>
</div>
<div class="paragraph">
<p>当创建如下的字符串:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def startingAndEndingWithANewline = '''
line one
line two
line three
'''</code></pre>
</div>
</div>
<div class="paragraph">
<p>你会发现结果字符串的第一个字符是一个换行符. 可以用反斜杠(backslash)转义换行符来移除该字符:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def strippedFirstNewline = '''\
line one
line two
line three
'''

assert !strippedFirstNewline.startsWith('\n')</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_escaping_special_characters">4.3.1. 转义特殊字符</h4>
<div class="paragraph">
<p>可以用反斜杠来转义单引号以避免终止(terminating)字符串字面量:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">'an escaped single quote: \' needs a backslash'</code></pre>
</div>
</div>
<div class="paragraph">
<p>可以用两个反斜杠来转义转义符本身:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">'an escaped escape character: \\ needs a double backslash'</code></pre>
</div>
</div>
<div class="paragraph">
<p>一些特殊字符也使用反斜杠当做转义符:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 33%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">转义序列</th>
<th class="tableblock halign-left valign-top">字符</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>\t</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">水平制表</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>\b</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">退格</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>\n</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">换行</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>\r</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">回车</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>\f</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">换页</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>\\</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">反斜杠字符 <em>\</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>\</em>'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">单引号字符 (单引号或三单引号字符串中使用)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>\"</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">双引号字符 (双引号或三双引号字符串中使用)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_unicode_escape_sequence">4.3.2. Unicode 转义序列</h4>
<div class="paragraph">
<p>那些没有出现在你键盘上的字符, 可以使用 unicode 转义序列来表示: 一个反斜杠, 之后是一个 <em>u</em>,
然后是4个十六进制数字.</p>
</div>
<div class="paragraph">
<p>例如, 欧元货币符号可以这样表示:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">'The Euro currency symbol: \u20AC'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_double_quoted_string">4.4. 双引号字符串</h3>
<div class="paragraph">
<p>双引号字符串即由双引号包围的一系列字符:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">"a double quoted string"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
在没有插入表达式(interpolated expression)的情况下双引号字符串为 <code>java.lang.String</code>;
如果有, 则为 <code>groovy.lang.GString</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
可以使用反斜杠字符来转义双引号, 如: <code>"A double quote: \""</code>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_string_interpolation">4.4.1. 字符串插值</h4>
<div class="paragraph">
<p>任何 Groovy 表达式都可以插入到所有的字符串字面量中, 除了单引号和三单引号字符串.
插值即把字符串中的占位符用其在对字符串求值(evaluation)中的值来替代的操作.
占位符表达式由 <code>${}</code> 包围, 对点表达式可以以 <code>$</code> 开头.
当 GString 传入到一个以 String 为参数的方法时, 占位符中的表达式会通过调用 <code>toString()</code> 方法
将其值转换为对应的字符串表示.</p>
</div>
<div class="paragraph">
<p>这里, 我们有一个带有占位符的字符串, 该占位符引用了一个本地变量:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def name = 'Guillaume' // a plain string
def greeting = "Hello ${name}"

assert greeting.toString() == 'Hello Guillaume'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy 中的任何表达式都是有效的, 在这个例子中我们可以看到其带有一个算术表达式:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def sum = "The sum of 2 and 3 equals ${2 + 3}"
assert sum.toString() == 'The sum of 2 and 3 equals 5'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<code>${}</code> 占位符中不仅仅允许表达式, 语句(statements)也是允许的, 但一个语句的值单纯(is just)为 <code>null</code>.
所以, 如果多个语句被插入到占位符中, 最后一个应该返回一个有意义的值.
例如, <code>"The sum of 1 and 2 is equal to ${def a = 1; def b = 2; a + b}"</code> 是支持的同时也能
如预期的工作, 但坚持在 GString 占位符中使用简单的表达式是一个好习惯.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>除了 <code>${}</code> 占位符, 对于点表达式我们也可以使用一个单独的 <code>$</code> 符号作为其前缀:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def person = [name: 'Guillaume', age: 36]
assert "$person.name is $person.age years old" == 'Guillaume is 36 years old'</code></pre>
</div>
</div>
<div class="paragraph">
<p>但是只有形式如 <code>a.b</code>, <code>a.b.c</code> 之类的是有效的, 表达式中含有括号如方法调用, 花括号如闭包,
算术操作符等都是无效的. 以下变量定义为一个数字:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def number = 3.14</code></pre>
</div>
</div>
<div class="paragraph">
<p>下面的语句会抛出 <code>groovy.lang.MissingPropertyException</code> 异常, 因为 Groovy 认为你
试图访问 number 的 <code>toString</code> 属性, 但是它是不存在的.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">shouldFail(MissingPropertyException) {
    println "$number.toString()"
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
可以认为 <code>"$number.toString()"</code> 被语法分析器(parser) 解释为 <code>"${number.toString}()"</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>如果你想在 GString 中转义 <code>$</code> 或者 <code>${}</code> 占位符, 让它们能显示而不会进行插值, 你只需要用
<code>\</code> 反斜杠字符来转义美元符号:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">assert '${name}' == "\${name}"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_special_case_of_interpolating_closure_expressions">4.4.2. 特例 插入闭包表达式</h4>
<div class="paragraph">
<p>到目前为止, 我们看到可以在 <code>${}</code> 占位符中放入任意的表达式, 但闭包是个特例并且有着特别的表示法.
当占位符包含一个箭头, <code>${-&gt;}</code>, 该表达式即是一个闭包表达式&#8201;&#8212;&#8201;你可以认为它是一个前面带有美元符号的闭包.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def sParameterLessClosure = "1 + 2 == ${-&gt; 3}" <i class="conum" data-value="1"></i><b>(1)</b>
assert sParameterLessClosure == '1 + 2 == 3'

def sOneParamClosure = "1 + 2 == ${ w -&gt; w &lt;&lt; 3}" <i class="conum" data-value="2"></i><b>(2)</b>
assert sOneParamClosure == '1 + 2 == 3'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>该闭包是一个无参闭包, 不接受参数.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>这里, 闭包接受一个 <code>java.io.StringWriter</code> 参数, 可以用 <code>&lt;&lt;</code> 左移操纵符来给它添加内容.
两种情况中, 占位符都是嵌入式闭包(embedded closures).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以这种方式定义插入的表达式显得更加冗长(verbose), 但与单纯的(mere)表达式相比, 闭包有一个
有趣的特性: 惰性求值(lazy evaluation).</p>
</div>
<div class="paragraph">
<p>让我们考虑下面的例子:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def number = 1 <i class="conum" data-value="1"></i><b>(1)</b>
def eagerGString = "value == ${number}"
def lazyGString = "value == ${ -&gt; number }"

assert eagerGString == "value == 1" <i class="conum" data-value="2"></i><b>(2)</b>
assert lazyGString ==  "value == 1" <i class="conum" data-value="3"></i><b>(3)</b>

number = 2 <i class="conum" data-value="4"></i><b>(4)</b>
assert eagerGString == "value == 1" <i class="conum" data-value="5"></i><b>(5)</b>
assert lazyGString ==  "value == 2" <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>我们定义了一个 <code>number</code> 变量, 值为 <code>1</code>, 然后我们它插入到2个 GStrings 中,
<code>eagerGString</code> 中作为表达式, <code>lazyGString</code> 中作为闭包.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>对 <code>eagerGString</code> 我们预期结果字符串包含有 1.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>lazyGString</code> 类似.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>然后我们改变该变量, 为其赋一个新值.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>对于单纯的(plain)插入表达式, 其值实际上是绑定到了 GString 创建时的值.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>但是对闭包表达式, 每次强制(coercion)把 GString 转换为 String 的时候都会调用闭包,
其结果是生成一个包含有新值的新字符串.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
一个嵌入式闭包表达式接受超过1个参数将会在运行时抛出(generate)异常, 只有0或者1个参数的闭包是允许的.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_interoperability_with_java">4.4.3. 与 Java 交互</h4>
<div class="paragraph">
<p>当一个方法(不管是在 Java 还是在 Groovy 中实现)期望(expects)一个 <code>java.lang.String</code>,
但我们传入一个 <code>groovy.lang.GString</code> 实例时, GString 的 <code>toString()</code> 方法会自动, 透明地被调用.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">String takeString(String message) {         <i class="conum" data-value="4"></i><b>(4)</b>
    assert message instanceof String        <i class="conum" data-value="5"></i><b>(5)</b>
    return message
}

def message = "The message is ${'hello'}"   <i class="conum" data-value="1"></i><b>(1)</b>
assert message instanceof GString           <i class="conum" data-value="2"></i><b>(2)</b>

def result = takeString(message)            <i class="conum" data-value="3"></i><b>(3)</b>
assert result instanceof String
assert result == 'The message is hello'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>我们创建了一个 GString 变量.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>我们仔细检查它是一个 GString 实例.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>然后我们把这个 GString 传入到接受 String 作为参数的方法.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>takeString()</code> 方法的签名明确声明(says)它唯一的参数是一个 String.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>我们进一步核实该参数确实是个 String 而不是 GString.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_gstring_and_string_hashcodes">4.4.4. GString 和 String 的哈希码</h4>
<div class="paragraph">
<p>尽管插值字符串可以用来代替普通 Java 字符串, 但它们与普通字符串在某一方面还是有区别的:
即它们的哈希码(hashCodes)是不一样的. 普通 Java 字符串是不可变的, 然而 GString 的结果字符串
表示是可变的, 取决于它的插入值. 即使结果字符串相同, GString 和 String 还是有不同的哈希码.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">assert "one: ${1}".hashCode() != "one: 1".hashCode()</code></pre>
</div>
</div>
<div class="paragraph">
<p>GString 和 Strings 有着不一样的哈希码值, 所以应该避免把 GString 当做 Map 的键来用,
尤其是在检索关联值(associated value)时应该使用 String 而不是 GString.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def key = "a"
def m = ["${key}": "letter ${key}"]     <i class="conum" data-value="1"></i><b>(1)</b>

assert m["a"] == null                   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>创建一个 map, 带有初始键值对(initial pair), 键为一个 GString.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>当我们视图获取该 String 键所对应的值时, 会发现无法找到, 由于 String 和 GString 有着
不同的哈希码值.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_triple_double_quoted_string">4.5. 三双引号字符串</h3>
<div class="paragraph">
<p>三双引号字符串类似(behave like)双引号字符串, 只是它们是多行的, 这点可类比三单引号字符串.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def name = 'Groovy'
def template = """
    Dear Mr ${name},

    You're the winner of the lottery!

    Yours sincerly,

    Dave
"""

assert template.toString().contains('Groovy')</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
在三双引号字符串中, 双引号跟单引号都不需要转义.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_slashy_string">4.6. 斜线字符串</h3>
<div class="paragraph">
<p>除了通常的引号字符串, Groovy 还提供了 斜线字符串(slashy strings), 其使用 <code>/</code> 作为定界符.
斜线字符串在定义正则表达式或者模式(patterns)时特别有用的, 因为不需要对反斜杠进行转义.</p>
</div>
<div class="paragraph">
<p>斜线字符串的示例:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def fooPattern = /.*foo.*/
assert fooPattern == '.*foo.*'</code></pre>
</div>
</div>
<div class="paragraph">
<p>只有斜线需要用反斜杠来转义:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def escapeSlash = /The character \/ is a forward slash/
assert escapeSlash == 'The character / is a forward slash'</code></pre>
</div>
</div>
<div class="paragraph">
<p>斜线字符串是多行的:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def multilineSlashy = /one
    two
    three/

assert multilineSlashy.contains('\n')</code></pre>
</div>
</div>
<div class="paragraph">
<p>斜线字符串也可以插值(如, GString):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def color = 'blue'
def interpolatedSlashy = /a ${color} car/

assert interpolatedSlashy == 'a blue car'</code></pre>
</div>
</div>
<div class="paragraph">
<p>有几个陷阱需要注意.</p>
</div>
<div class="paragraph">
<p>不能用两个斜线来表示空(斜线)字符串, 因为它被 Groovy 语法分析器当做一个行注释来理解.
这是为什么下面的断言实际上会导致一个编译错误, 因为它看起来像一个没结束(non-terminated)的语句.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">assert '' == //</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dollar_slashy_string">4.7. 美元斜线字符串</h3>
<div class="paragraph">
<p>美元斜线字符串(dollar slashy string)是以 <code>$/</code> 开始, 以 <code>/$</code> 结束的多行 GStrings.
转义字符为美元符号, 可以用来转义另一美元符号或者正斜杠.
但是美元符号跟正斜杠都可以不用转义, 除了像 GString 占位符那样的字符串序列需要对美元符号进行转义,
以及像美元斜线字符串关闭标签那样的字符序列进行转义.</p>
</div>
<div class="paragraph">
<p>请看下面的例子:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def name = "Guillaume"
def date = "April, 1st"

def dollarSlashy = $/
    Hello $name,
    today we're ${date}.

    $ dollar sign
    $$ escaped dollar sign
    \ backslash
    / forward slash
    $/ escaped forward slash
    $/$ escaped dollar slashy string delimiter
/$

assert [
    'Guillaume',
    'April, 1st',
    '$ dollar sign',
    '$ escaped dollar sign',
    '\\ backslash',
    '/ forward slash',
        '$/ escaped forward slash',
        '/$ escaped dollar slashy string delimiter'

        ].each { dollarSlashy.contains(it) }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_string_summary_table">4.8. 字符串总结表</h3>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">名称</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">语法</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">插值</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">多行</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">转义符</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">单引号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'&#8230;'</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">三单引号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'''&#8230;'''</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">双引号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"&#8230;"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check-empty"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">三双引号</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"""&#8230;"""</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">斜线</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/&#8230;/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">美元斜线</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$/&#8230;/$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="icon"><i class="icon-check"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_characters">4.9. 字符</h3>
<div class="paragraph">
<p>与 Java 不同, Groovy 没有明确的字符字面量.
但是, 你可以通过 3 种不同的方式明确的将 Groovy 字符串转换为字符:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">char c1 = 'A' <i class="conum" data-value="1"></i><b>(1)</b>
assert c1 instanceof Character

def c2 = 'B' as char <i class="conum" data-value="2"></i><b>(2)</b>
assert c2 instanceof Character

def c3 = (char)'C' <i class="conum" data-value="3"></i><b>(3)</b>
assert c3 instanceof Character</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>声明变量时明确指定其类型为 <code>char</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>使用 <code>as</code> 操作符强制类型转换(type coercion).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>使用 <code>(char)</code> 强制类型转换.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
当字符存储在变量中时, 做法(option) <em class="conum">1</em> 比较好(interesting),
而其他两种做法(<em class="conum">2</em> 和 <em class="conum">3</em>), 在必须传入一个
字符参数以调用方法时比较好.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_numbers">5. 数值</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy 支持不同类型的整型字面量(integral literals)和浮点型字面量(decimal literals),
依靠 Java 中通用的(usual) <code>Number</code> 类型.</p>
</div>
<div class="sect2">
<h3 id="_integral_literals">5.1. 整数</h3>
<div class="paragraph">
<p>整数类型与 Java 中的一样:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>byte</code></p>
</li>
<li>
<p><code>char</code></p>
</li>
<li>
<p><code>short</code></p>
</li>
<li>
<p><code>int</code></p>
</li>
<li>
<p><code>long</code></p>
</li>
<li>
<p><code>java.lang.BigInteger</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>可以用下面的声明来创建这些整型数字:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">// 原生类型(primitive types)
byte  b = 1
char  c = 2
short s = 3
int   i = 4
long  l = 5

// 无限精度(infinite precision)
BigInteger bi =  6</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果使用 <code>def</code> 关键字来声明可选类型(optional type), 那么整数的类型将会发生变化:
它会采用取值范围包含该整数的类型.</p>
</div>
<div class="paragraph">
<p>对正数而言:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def a = 1
assert a instanceof Integer

// Integer.MAX_VALUE
def b = 2147483647
assert b instanceof Integer

// Integer.MAX_VALUE + 1
def c = 2147483648
assert c instanceof Long

// Long.MAX_VALUE
def d = 9223372036854775807
assert d instanceof Long

// Long.MAX_VALUE + 1
def e = 9223372036854775808
assert e instanceof BigInteger</code></pre>
</div>
</div>
<div class="paragraph">
<p>对负数也是一样的:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def na = -1
assert na instanceof Integer

// Integer.MIN_VALUE
def nb = -2147483648
assert nb instanceof Integer

// Integer.MIN_VALUE - 1
def nc = -2147483649
assert nc instanceof Long

// Long.MIN_VALUE
def nd = -9223372036854775808
assert nd instanceof Long

// Long.MIN_VALUE - 1
def ne = -9223372036854775809
assert ne instanceof BigInteger</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_alternative_non_base_10_representations">5.1.1. 可选的非十进制表示</h4>
<div class="sect4">
<h5 id="_binary_literal">二进制</h5>
<div class="paragraph">
<p>在 Java 6 及之前版本, 以及在 Groovy 中, 数字可以以 十进制, 八进制, 十六进制 表示,
在 Java 7 及 Groovy 2 中, 可以附加 <code>0b</code> 前缀来使用二进制:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">int xInt = 0b10101111
assert xInt == 175

short xShort = 0b11001001
assert xShort == 201 as short

byte xByte = 0b11
assert xByte == 3 as byte

long xLong = 0b101101101101
assert xLong == 2925l

BigInteger xBigInteger = 0b111100100001
assert xBigInteger == 3873g

int xNegativeInt = -0b10101111
assert xNegativeInt == -175</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_octal_literal">八进制</h5>
<div class="paragraph">
<p>八进制数字是以 <code>0</code> 为前缀, 之后跟上八进制数字(digits), 这样典型的格式来定义的(specified).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">int xInt = 077
assert xInt == 63

short xShort = 011
assert xShort == 9 as short

byte xByte = 032
assert xByte == 26 as byte

long xLong = 0246
assert xLong == 166l

BigInteger xBigInteger = 01111
assert xBigInteger == 585g

int xNegativeInt = -077
assert xNegativeInt == -63</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_hexadecimal_literal">十六进制</h5>
<div class="paragraph">
<p>十六进制数值是以 <code>0x</code> 为前缀, 之后跟上十六进制数字, 这样典型的格式来定义的.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">int xInt = 0x77
assert xInt == 119

short xShort = 0xaa
assert xShort == 170 as short

byte xByte = 0x3a
assert xByte == 58 as byte

long xLong = 0xffff
assert xLong == 65535l

BigInteger xBigInteger = 0xaaaa
assert xBigInteger == 43690g

Double xDouble = new Double('0x1.0p0')
assert xDouble == 1.0d

int xNegativeInt = -0x77
assert xNegativeInt == -119</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_decimal_literals">5.2. 浮点数</h3>
<div class="paragraph">
<p>浮点数类型与 Java 中的一样:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>float</code></p>
</li>
<li>
<p><code>double</code></p>
</li>
<li>
<p><code>java.lang.BigDecimal</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>可以用下面的声明来创建这些浮点型数字:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">// primitive types
float  f = 1.234
double d = 2.345

// infinite precision
BigDecimal bd =  3.456</code></pre>
</div>
</div>
<div class="paragraph">
<p>浮点数可以用指数表示, (格式为)表示指数的 <code>e</code> 或 <code>E</code> 字母, 之后是一个可选的正负号,
和一个代表指数的整数:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">assert 1e3  ==  1_000.0
assert 2E4  == 20_000.0
assert 3e+1 ==     30.0
assert 4E-2 ==      0.04
assert 5e-1 ==      0.5</code></pre>
</div>
</div>
<div class="paragraph">
<p>为了方便(conveniently)浮点数精确计算, Groovy 选择 <code>java.lang.BigDecimal</code> 作为它的
浮点数类型. 此外, <code>float</code> 和 <code>double</code> 都是支持的, 但是需要明确的类型声明, 强制类型转换
或者添加后缀. 尽管 <code>BigDecimal</code> 是浮点数的默认类型, 在接受 <code>float</code> 或者 <code>double</code>
为参数的方法或闭包中, 浮点数字面量也是能被接受的.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
浮点数不能用二进制, 八进制, 十六进制表示法来表示.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_underscore_in_literals">5.3. Underscore in literals</h3>
<div class="paragraph">
<p>When writing long literal numbers, it’s harder on the eye to figure out how some numbers are grouped together, for example with groups of thousands, of words, etc. By allowing you to place underscore in number literals, it’s easier to spot those groups:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">long creditCardNumber = 1234_5678_9012_3456L
long socialSecurityNumbers = 999_99_9999L
double monetaryAmount = 12_345_132.12
long hexBytes = 0xFF_EC_DE_5E
long hexWords = 0xFFEC_DE5E
long maxLong = 0x7fff_ffff_ffff_ffffL
long alsoMaxLong = 9_223_372_036_854_775_807L
long bytes = 0b11010010_01101001_10010100_10010010</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_number_type_suffixes">5.4. Number type suffixes</h3>
<div class="paragraph">
<p>We can force a number (including binary, octals and hexadecimals) to have a specific type by giving a suffix (see table bellow), either uppercase or lowercase.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 33%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Suffix</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G</code> or <code>g</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>L</code> or <code>l</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>I</code> or <code>i</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>G</code> or <code>g</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>D</code> or <code>d</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>F</code> or <code>f</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">assert 42I == new Integer('42')
assert 42i == new Integer('42') // lowercase i more readable
assert 123L == new Long("123") // uppercase L more readable
assert 2147483648 == new Long('2147483648') // Long type used, value too large for an Integer
assert 456G == new BigInteger('456')
assert 456g == new BigInteger('456')
assert 123.45 == new BigDecimal('123.45') // default BigDecimal type used
assert 1.200065D == new Double('1.200065')
assert 1.234F == new Float('1.234')
assert 1.23E23D == new Double('1.23E23')
assert 0b1111L.class == Long // binary
assert 0xFFi.class == Integer // hexadecimal
assert 034G.class == BigInteger // octal</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_math_operations">5.5. Math operations</h3>
<div class="paragraph">
<p>Although <a href="#_operators">operators</a> are covered later on, it&#8217;s important to discuss the behavior of math operations
and what their resulting types are.</p>
</div>
<div class="paragraph">
<p>Division and power binary operations aside (covered below),</p>
</div>
<div class="ulist">
<ul>
<li>
<p>binary operations between <code>byte</code>, <code>char</code>, <code>short</code> and <code>int</code> result in <code>int</code></p>
</li>
<li>
<p>binary operations involving <code>long</code> with <code>byte</code>, <code>char</code>, <code>short</code> and <code>int</code> result in <code>long</code></p>
</li>
<li>
<p>binary operations involving <code>BigInteger</code> and any other integral type result in <code>BigInteger</code></p>
</li>
<li>
<p>binary operations between <code>float</code>, <code>double</code> and <code>BigDecimal</code> result in <code>double</code></p>
</li>
<li>
<p>binary operations between two <code>BigDecimal</code> result in <code>BigDecimal</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following table summarizes those rules:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">byte</th>
<th class="tableblock halign-left valign-top">char</th>
<th class="tableblock halign-left valign-top">short</th>
<th class="tableblock halign-left valign-top">int</th>
<th class="tableblock halign-left valign-top">long</th>
<th class="tableblock halign-left valign-top">BigInteger</th>
<th class="tableblock halign-left valign-top">float</th>
<th class="tableblock halign-left valign-top">double</th>
<th class="tableblock halign-left valign-top">BigDecimal</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>byte</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>char</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>short</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>int</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>long</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BigInteger</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>float</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>double</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BigDecimal</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigDecimal</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Thanks Groovy&#8217;s operator overloading, the usual arithmetic operators work as well with <code>BigInteger</code> and <code>BigDecimal</code>,
unlike in Java where you have to use explict methods for operating on those numbers.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="integer_division">5.5.1. The case of the division operator</h4>
<div class="paragraph">
<p>The division operators <code>/</code> (and <code>/=</code> for division and assignment) produce a <code>double</code> result
if either operand is a <code>float</code> or <code>double</code>, and a <code>BigDecimal</code> result otherwise
(when both operands are any combination of an integral type <code>short</code>, <code>char</code>, <code>byte</code>, <code>int</code>, <code>long</code>,
<code>BigInteger</code> or <code>BigDecimal</code>).</p>
</div>
<div class="paragraph">
<p><code>BigDecimal</code> division is performed with the <code>divide()</code> method if the division is exact
(ie. yielding a result that can be represented within the bounds of the same precision and scale),
or using a <code>MathContext</code> with a <a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#precision()">precision</a>
of the maximum of the two operands&#8217; precision plus an extra precision of 10,
and a <a href="http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#scale()">scale</a>
of the maximum of 10 and the maximum of the operands&#8217; scale.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
For integer division like in Java, you should use the <code>intdiv()</code> method,
as Groovy doesn&#8217;t provide a dedicated integer division operator symbol.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="power_operator">5.5.2. The case of the power operator</h4>
<div class="paragraph">
<p>The power operation is represented by the <code>**</code> operator, with two parameters: the base and the exponent.
The result of the power operation depends on its operands, and the result of the operation
(in particular if the result can be represented as an integral value).</p>
</div>
<div class="paragraph">
<p>The following rules are used by Groovy&#8217;s power operation to determine the resulting type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the exponent is a decimal value</p>
<div class="ulist">
<ul>
<li>
<p>if the result can be represented as an <code>Integer</code>, then return an <code>Integer</code></p>
</li>
<li>
<p>else if the result can be represented as a <code>Long</code>, then return a <code>Long</code></p>
</li>
<li>
<p>otherwise return a <code>Double</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>If the exponent is an integral value</p>
<div class="ulist">
<ul>
<li>
<p>if the exponent is strictly negative, then return an <code>Integer</code>, <code>Long</code> or <code>Double</code> if the result value fits in that type</p>
</li>
<li>
<p>if the exponent is positive or zero</p>
<div class="ulist">
<ul>
<li>
<p>if the base is a <code>BigDecimal</code>, then return a <code>BigDecimal</code> result value</p>
</li>
<li>
<p>if the base is a <code>BigInteger</code>, then return a <code>BigInteger</code> result value</p>
</li>
<li>
<p>if the base is an <code>Integer</code>, then return an <code>Integer</code> if the result value fits in it, otherwise a <code>BigInteger</code></p>
</li>
<li>
<p>if the base is a <code>Long</code>, then return a <code>Long</code> if the result value fits in it, otherwise a <code>BigInteger</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>We can illustrate those rules with a few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">// base and exponent are ints and the result can be represented by an Integer
assert    2    **   3    instanceof Integer    //  8
assert   10    **   9    instanceof Integer    //  1_000_000_000

// the base is a long, so fit the result in a Long
// (although it could have fit in an Integer)
assert    5L   **   2    instanceof Long       //  25

// the result can't be represented as an Integer or Long, so return a BigInteger
assert  100    **  10    instanceof BigInteger //  10e20
assert 1234    ** 123    instanceof BigInteger //  170515806212727042875...

// the base is a BigDecimal and the exponent a negative int
// but the result can be represented as an Integer
assert    0.5  **  -2    instanceof Integer    //  4

// the base is an int, and the exponent a negative float
// but again, the result can be represented as an Integer
assert    1    **  -0.3f instanceof Integer    //  1

// the base is an int, and the exponent a negative int
// but the result will be calculated as a Double
// (both base and exponent are actually converted to doubles)
assert   10    **  -1    instanceof Double     //  0.1

// the base is a BigDecimal, and the exponent is an int, so return a BigDecimal
assert    1.2  **  10    instanceof BigDecimal //  6.1917364224

// the base is a float or double, and the exponent is an int
// but the result can only be represented as a Double value
assert    3.4f **   5    instanceof Double     //  454.35430372146965
assert    5.6d **   2    instanceof Double     //  31.359999999999996

// the exponent is a decimal value
// and the result can only be represented as a Double value
assert    7.8  **   1.9  instanceof Double     //  49.542708423868476
assert    2    **   0.1f instanceof Double     //  1.0717734636432956</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_booleans">6. Booleans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Boolean is a special data type that is used to represent truth values: <code>true</code> and <code>false</code>.
Use this data type for simple flags that track true/false <a href="#_conditional_operators">conditions</a>.</p>
</div>
<div class="paragraph">
<p>Boolean values can be stored in variables, assigned into fields, just like any other data type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def myBooleanVariable = true
boolean untypedBooleanVar = false
booleanField = true</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>true</code> and <code>false</code> are the only two primitive boolean values.
But more complex boolean expressions can be represented using <a href="#_bitwise_and_logical_operators">logical operators</a>.</p>
</div>
<div class="paragraph">
<p>In addition, Groovy has <a href="#_the_groovy_truth">special rules</a> (often referred to as <em>Groovy Truth</em>)
for coercing non-boolean objects to a boolean value.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lists">7. Lists</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy uses a comma-separated list of values, surrounded by square brackets, to denote lists.
Groovy lists are plain JDK <code>java.util.List</code>, as Groovy doesn&#8217;t define its own collection classes.
The concrete list implementation used when defining list literals are <code>java.util.ArrayList</code> by default,
unless you decide to specify otherwise, as we shall see later on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def numbers = [1, 2, 3]         <i class="conum" data-value="1"></i><b>(1)</b>

assert numbers instanceof List  <i class="conum" data-value="2"></i><b>(2)</b>
assert numbers.size() == 3      <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We define a list numbers delimited by commas and surrounded by square brackets, and we assign that list into a variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The list is an instance of Java&#8217;s <code>java.util+List</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The size of the list can be queried with the <code>size()</code> method, and shows our list contains 3 elements</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the above example, we used a homogeneous list, but you can also create lists containing values of heterogeneous types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def heterogeneous = [1, "a", true]  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Our list here contains a number, a string and a boolean value</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We mentioned that by default, list literals are actually instances of <code>java.util.ArrayList</code>,
but it is possible to use a different backing type for our lists,
thanks to using type coercion with the <code>as</code> operator, or with explicit type declaration for your variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def arrayList = [1, 2, 3]
assert arrayList instanceof java.util.ArrayList

def linkedList = [2, 3, 4] as LinkedList    <i class="conum" data-value="1"></i><b>(1)</b>
assert linkedList instanceof java.util.LinkedList

LinkedList otherLinked = [3, 4, 5]          <i class="conum" data-value="2"></i><b>(2)</b>
assert otherLinked instanceof java.util.LinkedList</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We use coercion with the <code>as</code> operator to explicitly request a <code>java.util.LinkedList</code> implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We can say that the variable holding the list literal is of type <code>java.util.LinkedList</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can access elements of the list with the <code>[]</code> subscript operator (both for reading and setting values)
with positive indices or negative indices to access elements from the end of the list, as well as with ranges,
and use the <code>&lt;&lt;</code> leftShift operator to append elements to a list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def letters = ['a', 'b', 'c', 'd']

assert letters[0] == 'a'     <i class="conum" data-value="1"></i><b>(1)</b>
assert letters[1] == 'b'

assert letters[-1] == 'd'    <i class="conum" data-value="2"></i><b>(2)</b>
assert letters[-2] == 'c'

letters[2] = 'C'             <i class="conum" data-value="3"></i><b>(3)</b>
assert letters[2] == 'C'

letters &lt;&lt; 'e'               <i class="conum" data-value="4"></i><b>(4)</b>
assert letters[ 4] == 'e'
assert letters[-1] == 'e'

assert letters[1, 3] == ['b', 'd']         <i class="conum" data-value="5"></i><b>(5)</b>
assert letters[2..4] == ['C', 'd', 'e']    <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Access the first element of the list (zeroth-based counting)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Access the last element of the list with a negative index: -1 is the first element from the end of the list</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Use an assignment to set a new value for the third element of the list</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Use the <code>&lt;&lt;</code> leftShift operator to append an element at the end of the list</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Access two elements at once, returning a new list containing those two elements</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use a range to access a range of values from the list, from a start to an end element position</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As lists can be heterogeneous in nature, lists can also contain other lists to create multi-dimensional lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def multi = [[0, 1], [2, 3]]     <i class="conum" data-value="1"></i><b>(1)</b>
assert multi[1][0] == 2          <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a list of list of numbers</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Access the second element of the top-most list, and the first element of the inner list</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_arrays">8. Arrays</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy reuses the list notation for arrays, but to make such literals arrays,
you need to explicitely define the type of the array through coercion or type declaration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">String[] arrStr = ['Ananas', 'Banana', 'Kiwi']  <i class="conum" data-value="1"></i><b>(1)</b>

assert arrStr instanceof String[]    <i class="conum" data-value="2"></i><b>(2)</b>
assert !(arrStr instanceof List)     <i class="conum" data-value="3"></i><b>(3)</b>

def numArr = [1, 2, 3] as int[]      <i class="conum" data-value="4"></i><b>(4)</b>

assert numArr instanceof int[]       <i class="conum" data-value="5"></i><b>(5)</b>
assert numArr.size() == 3</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define an array of strings using explicit variable type declaration</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Assert that we created an array of strings</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Create an array of ints with the <code>as</code> operator</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Assert that we created an array of primitive ints</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also create multi-dimensional arrays:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def matrix3 = new Integer[3][3]         <i class="conum" data-value="1"></i><b>(1)</b>
assert matrix3.size() == 3

Integer[][] matrix2                     <i class="conum" data-value="2"></i><b>(2)</b>
matrix2 = [[1, 2], [3, 4]]
assert matrix2 instanceof Integer[][]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You can define the bounds of a new array</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Or declare an array without specifying its bounds</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Access to elements of an array follows the same notation as for lists:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">String[] names = ['Cédric', 'Guillaume', 'Jochen', 'Paul']
assert names[0] == 'Cédric'     <i class="conum" data-value="1"></i><b>(1)</b>

names[2] = 'Blackdrag'          <i class="conum" data-value="2"></i><b>(2)</b>
assert names[2] == 'Blackdrag'</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Retrieve the first element of the array</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the value of the third element of the array to a new value</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Java&#8217;s array initializer notation is not supported by Groovy,
as the curly braces can be misinterpreted with the notation of Groovy closures.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maps">9. Maps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes called dictionaries or associative arrays in other languages, Groovy features maps.
Maps associate keys to values, separating keys and values with colons, and each key/value pairs with commas,
and the whole keys and values surrounded by square brackets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def colors = [red: '#FF0000', green: '#00FF00', blue: '#0000FF']   <i class="conum" data-value="1"></i><b>(1)</b>

assert colors['red'] == '#FF0000'    <i class="conum" data-value="2"></i><b>(2)</b>
assert colors.green  == '#00FF00'    <i class="conum" data-value="3"></i><b>(3)</b>

colors['pink'] = '#FF00FF'           <i class="conum" data-value="4"></i><b>(4)</b>
colors.yellow  = '#FFFF00'           <i class="conum" data-value="5"></i><b>(5)</b>

assert colors.pink == '#FF00FF'
assert colors['yellow'] == '#FFFF00'

assert colors instanceof java.util.LinkedHashMap</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We define a map of string color names, associated with their hexadecimal-coded html colors</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We use the subscript notation to check the content associated with the <code>red</code> key</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We can also use the property notation to assert the color green&#8217;s hexadecimal representation</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Similarily, we can use the subscript notation to add a new key/value pair</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Or the property notation, to add the <code>yellow</code> color</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
When using names for the keys, we actually define string keys in the map.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Groovy creates maps that are actually instances of <code>java.util.LinkedHashMap</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you try to access a key which is not present in the map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">assert colors.unknown == null</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will retrieve a <code>null</code> result.</p>
</div>
<div class="paragraph">
<p>In the examples above, we used string keys, but you can also use values of other types as keys:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def numbers = [1: 'one', 2: 'two']

assert numbers[1] == 'one'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we used numbers as keys, as numbers can unambiguously be recognized as numbers,
so Groovy will not create a string key like in our previous examples.
But consider the case you want to pass a variable in lieu of the key, to have the value of that variable become the key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">def key = 'name'
def person = [key: 'Guillaume']      <i class="conum" data-value="1"></i><b>(1)</b>

assert !person.containsKey('name')   <i class="conum" data-value="2"></i><b>(2)</b>
assert person.containsKey('key')     <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>key</code> associated with the <code>'Guillaume&#8217;</code> name will actually be the <code>"key"</code> string, not the value associated with the <code>key</code> variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The map doesn&#8217;t contain the <code>'name&#8217;</code> key</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Instead, the map contains a <code>'key&#8217;</code> key</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
You can also pass quoted strings as well as keys: <code>["name": "Guillaume"]</code>.
This is mandatory if your key string isn&#8217;t a valid identifier,
for example if you wanted to create a string key containing a hash like in: <code>["street-name": "Main street"]</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When you need to pass variable values as keys in your map definitions, you must surround the variable or expression with parentheses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint"><code class="groovy language-groovy">person = [(key): 'Guillaume']        <i class="conum" data-value="1"></i><b>(1)</b>

assert person.containsKey('name')    <i class="conum" data-value="2"></i><b>(2)</b>
assert !person.containsKey('key')    <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This time, we surround the <code>key</code> variable with parentheses, to instruct the parser we are passing a variable rather than defining a string key</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The map does contain the <code>name</code> key</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>But the map doesn&#8217;t contain the <code>key</code> key as before</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.4.0-SNAPSHOT<br>
Last updated 2014-07-13 22:01:18 CST
</div>
</div>
</body>
</html>